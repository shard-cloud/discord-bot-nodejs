Esta se√ß√£o descreve como colocar seu bot Discord Node.js online em produ√ß√£o, incluindo deploy na ShardCloud e em servidor pr√≥prio.

## ‚òÅÔ∏è Deploy na ShardCloud (Recomendado)

A ShardCloud √© uma plataforma especializada em hospedagem de bots Discord que oferece deploy simplificado e gerenciamento autom√°tico.

### üéØ Vantagens da ShardCloud
- **Deploy Autom√°tico** - Upload e configura√ß√£o em minutos
- **Gerenciamento Simplificado** - Interface web intuitiva
- **Escalabilidade Autom√°tica** - Recursos ajustados conforme necess√°rio
- **Monitoramento Integrado** - Logs e m√©tricas em tempo real
- **Backup Autom√°tico** - Prote√ß√£o de dados garantida
- **Suporte 24/7** - Suporte t√©cnico especializado

### üìã Pr√©-requisitos
- Bot Discord criado no [Portal do Desenvolvedor](https://discord.com/developers/applications)
- Conta na [ShardCloud](https://shardcloud.app)
- Banco de dados MongoDB (MongoDB Atlas recomendado)

### üöÄ Passos para Deploy

#### 1. Preparar o Projeto
```bash
# Clone o reposit√≥rio
git clone <url_do_repositorio>
cd discord-bot-nodejs

# Instale as depend√™ncias
npm install
```

#### 2. Configurar Vari√°veis de Ambiente
Crie um arquivo `.env` com as vari√°veis necess√°rias:

```env
BOT_TOKEN=seu_token_do_bot
CLIENT_ID=seu_client_id
DATABASE=mongodb+srv://usuario:senha@cluster.mongodb.net/discord-bot
ERROR_LOGS=webhook_url_para_logs_de_erro
```

#### 3. Criar Arquivo de Configura√ß√£o
Crie um arquivo `.shardcloud` na raiz do projeto:

```ini
DISPLAY_NAME=Discord Bot Node.js
MAIN=bot.js
MEMORY=512
VERSION=recommended
DESCRIPTION=Bot Discord completo com sistema modular, economia, estat√≠sticas, modera√ß√£o e muito mais
```

#### 4. Fazer Upload na ShardCloud
1. Acesse o painel da ShardCloud
2. Clique em "Novo Projeto"
3. Fa√ßa upload do arquivo `.zip` do projeto
4. Configure as vari√°veis de ambiente
5. Clique em "Deploy"

#### 5. Configurar Recursos
```ini
# Para servidores pequenos (at√© 1000 membros)
MEMORY=256
CPU=0.5

# Para servidores m√©dios (1000-5000 membros)
MEMORY=512
CPU=1.0

# Para servidores grandes (5000+ membros)
MEMORY=1024
CPU=2.0
```

### üîß Configura√ß√£o Avan√ßada na ShardCloud

#### Vari√°veis de Ambiente
```env
# Vari√°veis obrigat√≥rias
BOT_TOKEN=seu_token_do_bot
CLIENT_ID=seu_client_id
DATABASE=mongodb+srv://usuario:senha@cluster.mongodb.net/discord-bot

# Vari√°veis opcionais
MAIN_SERVER=id_do_servidor_principal
SUPPORT_SERVER=id_do_servidor_de_suporte
ERROR_LOGS=webhook_url_para_logs_de_erro
```

#### Configura√ß√£o de Recursos
```ini
# Configura√ß√£o para diferentes tamanhos de servidor
DISPLAY_NAME=Discord Bot Node.js
MAIN=bot.js
MEMORY=512
VERSION=recommended
DESCRIPTION=Bot Discord completo com sistema modular

# Configura√ß√µes adicionais
NODE_ENV=production
LOG_LEVEL=info
```

### üìä Monitoramento na ShardCloud

#### M√©tricas Dispon√≠veis
- **CPU Usage** - Uso de CPU em tempo real
- **Memory Usage** - Uso de mem√≥ria
- **Network** - Tr√°fego de rede
- **Uptime** - Tempo de funcionamento
- **Logs** - Logs em tempo real

#### Alertas Autom√°ticos
- **Alto uso de CPU** - Notifica√ß√£o quando CPU > 80%
- **Alto uso de mem√≥ria** - Notifica√ß√£o quando RAM > 90%
- **Bot offline** - Notifica√ß√£o quando bot desconecta
- **Erros cr√≠ticos** - Notifica√ß√£o de erros importantes

## üñ•Ô∏è Deploy em Servidor Pr√≥prio (Avan√ßado)

Para usu√°rios que preferem ter controle total sobre a infraestrutura.

### üéØ Pr√©-requisitos
- Servidor VPS ou dedicado
- Node.js 16.11.0 ou superior
- MongoDB (local ou MongoDB Atlas)
- PM2 para gerenciamento de processos
- Nginx para proxy reverso (opcional)

### üöÄ Passos para Deploy

#### 1. Preparar o Servidor
```bash
# Atualizar sistema
sudo apt update && sudo apt upgrade -y

# Instalar Node.js
curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -
sudo apt-get install -y nodejs

# Instalar PM2
sudo npm install -g pm2

# Instalar MongoDB (opcional)
sudo apt install mongodb
```

#### 2. Configurar o Projeto
```bash
# Clonar reposit√≥rio
git clone <url_do_repositorio>
cd discord-bot-nodejs

# Instalar depend√™ncias
npm install

# Configurar vari√°veis de ambiente
cp .env.example .env
nano .env
```

#### 3. Configurar PM2
Crie um arquivo `ecosystem.config.js`:

```javascript
module.exports = {
  apps: [{
    name: 'discord-bot',
    script: 'bot.js',
    instances: 1,
    autorestart: true,
    watch: false,
    max_memory_restart: '1G',
    env: {
      NODE_ENV: 'production'
    }
  }]
};
```

#### 4. Iniciar o Bot
```bash
# Iniciar com PM2
pm2 start ecosystem.config.js

# Salvar configura√ß√£o
pm2 save

# Configurar para iniciar automaticamente
pm2 startup
```

#### 5. Configurar Nginx (Opcional)
```nginx
server {
    listen 80;
    server_name seu-dominio.com;

    location / {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
    }
}
```

### üîß Configura√ß√£o Avan√ßada

#### Configura√ß√£o de Logs
```bash
# Configurar logs do PM2
pm2 logs discord-bot

# Configurar rota√ß√£o de logs
pm2 install pm2-logrotate
```

#### Configura√ß√£o de Backup
```bash
# Script de backup autom√°tico
#!/bin/bash
DATE=$(date +%Y%m%d_%H%M%S)
mongodump --out /backup/mongodb_$DATE
tar -czf /backup/bot_$DATE.tar.gz /path/to/bot
```

#### Configura√ß√£o de Monitoramento
```bash
# Instalar ferramentas de monitoramento
sudo apt install htop iotop nethogs

# Configurar alertas
# Adicionar ao crontab
*/5 * * * * /path/to/check_bot.sh
```

## üê≥ Deploy com Docker

### üìã Pr√©-requisitos
- Docker instalado
- Docker Compose instalado
- Arquivo `docker-compose.yml`

### üöÄ Configura√ß√£o Docker

#### Dockerfile
```dockerfile
FROM node:18-alpine

WORKDIR /app

COPY package*.json ./
RUN npm ci --only=production

COPY . .

EXPOSE 3000

CMD ["node", "bot.js"]
```

#### docker-compose.yml
```yaml
version: '3.8'

services:
  bot:
    build: .
    environment:
      - BOT_TOKEN=${BOT_TOKEN}
      - CLIENT_ID=${CLIENT_ID}
      - DATABASE=${DATABASE}
    restart: unless-stopped
    depends_on:
      - mongodb

  mongodb:
    image: mongo:latest
    environment:
      - MONGO_INITDB_ROOT_USERNAME=admin
      - MONGO_INITDB_ROOT_PASSWORD=password
    volumes:
      - mongodb_data:/data/db
    ports:
      - "27017:27017"

volumes:
  mongodb_data:
```

#### Deploy com Docker
```bash
# Construir e iniciar
docker-compose up -d

# Ver logs
docker-compose logs -f bot

# Parar
docker-compose down
```

## üîß Configura√ß√£o de Produ√ß√£o

### ‚öôÔ∏è Configura√ß√µes Essenciais

#### Vari√°veis de Ambiente
```env
# Produ√ß√£o
NODE_ENV=production
LOG_LEVEL=info

# Bot
BOT_TOKEN=seu_token_do_bot
CLIENT_ID=seu_client_id

# Banco de dados
DATABASE=mongodb+srv://usuario:senha@cluster.mongodb.net/discord-bot

# Logs
ERROR_LOGS=webhook_url_para_logs_de_erro

# Servidores
MAIN_SERVER=id_do_servidor_principal
SUPPORT_SERVER=id_do_servidor_de_suporte
```

#### Configura√ß√£o do Bot
```javascript
// config.js para produ√ß√£o
module.exports = {
  OWNER_IDS: ["seu_id"],
  SUPPORT_SERVER: "https://discord.gg/seu-servidor",
  MAIN_SERVER: "https://discord.gg/seu-servidor-principal",

  PREFIX_COMMANDS: {
    ENABLED: true,
    DEFAULT_PREFIX: "!",
  },
  INTERACTIONS: {
    SLASH: true,
    CONTEXT: true,
    GLOBAL: true,
  },
  // ... outras configura√ß√µes
};
```

### üìä Monitoramento e Logs

#### Configura√ß√£o de Logs
```javascript
// Sistema de logs para produ√ß√£o
const pino = require('pino');

const logger = pino({
  level: 'info',
  transport: {
    target: 'pino-pretty',
    options: {
      colorize: true,
      translateTime: 'yyyy-mm-dd HH:mm:ss',
      ignore: 'pid,hostname'
    }
  }
});
```

#### Monitoramento de Sa√∫de
```javascript
// Endpoint de sa√∫de
app.get('/health', (req, res) => {
  res.json({
    status: 'ok',
    timestamp: new Date().toISOString(),
    uptime: process.uptime(),
    memory: process.memoryUsage()
  });
});
```

## üö® Troubleshooting

### ‚ùå Problemas Comuns

#### Bot n√£o conecta
*   Verifique se o token est√° correto
*   Confirme se o bot tem as permiss√µes necess√°rias
*   Verifique se o servidor est√° acess√≠vel

#### Erros de mem√≥ria
*   Aumente a mem√≥ria alocada
*   Verifique se h√° vazamentos de mem√≥ria
*   Configure restart autom√°tico

#### Problemas de banco de dados
*   Verifique a string de conex√£o
*   Confirme se o banco est√° acess√≠vel
*   Verifique se as credenciais est√£o corretas

### üîß Solu√ß√µes

#### Verificar Status
```bash
# PM2
pm2 status
pm2 logs discord-bot

# Docker
docker-compose ps
docker-compose logs bot

# ShardCloud
# Verificar no painel da ShardCloud
```

#### Reiniciar Bot
```bash
# PM2
pm2 restart discord-bot

# Docker
docker-compose restart bot

# ShardCloud
# Reiniciar via painel
```

#### Verificar Logs
```bash
# Logs do sistema
tail -f logs/combined-*.log

# Logs do PM2
pm2 logs discord-bot

# Logs do Docker
docker-compose logs -f bot
```

## üìà Otimiza√ß√£o de Performance

### üöÄ Otimiza√ß√µes Gerais

#### Configura√ß√£o de Cache
```javascript
// Configura√ß√£o de cache
CACHE_SIZE: {
  GUILDS: 100,
  USERS: 10000,
  MEMBERS: 10000,
},
```

#### Configura√ß√£o de Rate Limits
```javascript
// Rate limits para APIs
RATE_LIMITS: {
  COMMANDS: 5,        // 5 comandos por minuto
  MESSAGES: 100,      // 100 mensagens por minuto
  INTERACTIONS: 50,   // 50 intera√ß√µes por minuto
},
```

#### Configura√ß√£o de Cooldowns
```javascript
// Cooldowns para comandos
COOLDOWNS: {
  DAILY: 24 * 60 * 60 * 1000,    // 24 horas
  SHOP: 30 * 1000,               // 30 segundos
  STATS: 5 * 1000,               // 5 segundos
},
```

### üìä Monitoramento de Performance

#### M√©tricas Importantes
- **CPU Usage** - Uso de CPU
- **Memory Usage** - Uso de mem√≥ria
- **Network I/O** - Tr√°fego de rede
- **Database Queries** - Consultas ao banco
- **Response Time** - Tempo de resposta

#### Alertas de Performance
- **Alto uso de CPU** - CPU > 80%
- **Alto uso de mem√≥ria** - RAM > 90%
- **Muitas consultas** - DB queries > 1000/min
- **Tempo de resposta alto** - Response time > 5s

---

**Deploy completo e otimizado para seu bot Discord Node.js!** üöÄ‚ú®
